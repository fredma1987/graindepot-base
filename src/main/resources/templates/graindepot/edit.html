<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="head::head(${title})">
</head>
<body style="overflow-x: hidden">
<form class="form-horizontal" role="form" id="validation-form" method="get">

    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="graindepotcode">
            库点编码:
        </label> <div class="col-sm-4">
        <input type="text" name="graindepotcode" id="graindepotcode" class="form-control"
               th:value="${item.graindepotcode}"
               placeholder="库点编码"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="graindepotname">
            库点名称:
        </label> <div class="col-sm-4">
        <input type="text" name="graindepotname" id="graindepotname" class="form-control"
               th:value="${item.graindepotname}"
               placeholder="库点名称"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="provinceid"> 省: </label>

        <div class="col-sm-4">
            <select id="provinceid" name="provinceid" class="form-control" th:value="${item.provinceid}">
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="cityid"> 市: </label>

        <div class="col-sm-4">
            <select id="cityid" name="cityid" class="form-control" th:value="${item.cityid}">
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="countyid"> 区县: </label>

        <div class="col-sm-4">
            <select id="countyid" name="countyid" class="form-control" th:value="${item.countyid}">
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="groupid"> 集团: </label>

        <div class="col-sm-4">
            <select id="groupid" name="groupid" class="form-control" th:value="${item.groupid}">
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="companyid"> 企业: </label>

        <div class="col-sm-4">
            <select id="companyid" name="companyid" class="form-control" th:value="${item.companyid}">
            </select>
        </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="address">
            库点地址:
        </label> <div class="col-sm-4">
        <input type="text" name="address" id="address" class="form-control"
               th:value="${item.address}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="postalcode">
            邮政编码:
        </label> <div class="col-sm-4">
        <input type="text" name="postalcode" id="postalcode" class="form-control"
               th:value="${item.postalcode}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="artificialperson">
            库点法人:
        </label> <div class="col-sm-4">
        <input type="text" name="artificialperson" id="artificialperson" class="form-control"
               th:value="${item.artificialperson}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="artificialidcard">
            法人身份证:
        </label> <div class="col-sm-4">
        <input type="text" name="artificialidcard" id="artificialidcard" class="form-control"
               th:value="${item.artificialidcard}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="linkman">
            联系人:
        </label> <div class="col-sm-4">
        <input type="text" name="linkman" id="linkman" class="form-control"
               th:value="${item.linkman}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="linkmanidcard">
            联系人身份证:
        </label> <div class="col-sm-4">
        <input type="text" name="linkmanidcard" id="linkmanidcard" class="form-control"
               th:value="${item.linkmanidcard}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="telnumber">
            联系电话:
        </label> <div class="col-sm-4">
        <input type="text" name="telnumber" id="telnumber" class="form-control"
               th:value="${item.telnumber}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="faxnumber">
            传真号码:
        </label> <div class="col-sm-4">
        <input type="text" name="faxnumber" id="faxnumber" class="form-control"
               th:value="${item.faxnumber}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="graindepoturl">
            粮库网址:
        </label> <div class="col-sm-4">
        <input type="text" name="graindepoturl" id="graindepoturl" class="form-control"
               th:value="${item.graindepoturl}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="bankname">
            开户银行:
        </label> <div class="col-sm-4">
        <input type="text" name="bankname" id="bankname" class="form-control"
               th:value="${item.bankname}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="bankaccno">
            银行账号:
        </label> <div class="col-sm-4">
        <input type="text" name="bankaccno" id="bankaccno" class="form-control"
               th:value="${item.bankaccno}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="remark">
            备注:
        </label> <div class="col-sm-4">
        <input type="text" name="remark" id="remark" class="form-control"
               th:value="${item.remark}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="creditcode">
            统一社会信用代码:
        </label> <div class="col-sm-4">
        <input type="text" name="creditcode" id="creditcode" class="form-control"
               th:value="${item.creditcode}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="taxregno">
            单位税号:
        </label> <div class="col-sm-4">
        <input type="text" name="taxregno" id="taxregno" class="form-control"
               th:value="${item.taxregno}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="taxnature">
            纳税性质:
        </label> <div class="col-sm-4">
        <select id="taxnature" name="taxnature" class="form-control"style="height:34px"
                th:value="${item.taxnature}">
        </select>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="businessrep">
            业务代表:
        </label> <div class="col-sm-4">
        <input type="text" name="businessrep" id="businessrep" class="form-control"
               th:value="${item.businessrep}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="businessscope">
            业务范围:
        </label> <div class="col-sm-4">
        <input type="text" name="businessscope" id="businessscope" class="form-control"
               th:value="${item.businessscope}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="longitude">
            经度:
        </label> <div class="col-sm-4">
        <input type="text" name="longitude" id="longitude" class="form-control"
               th:value="${item.longitude}"/>
    </div>
    </div>
    <div class="form-group">
        <label class="col-sm-4 control-label no-padding-right" for="latitude">
            维度:
        </label> <div class="col-sm-4">
        <input type="text" name="latitude" id="latitude" class="form-control"
               th:value="${item.latitude}"/>
    </div>
    </div>

    <div class="form-group">
        <div class="col-md-6 center">
            <button class="btn btn-info" type="submit">
                <i class="icon-ok bigger-110"></i>
                保存
            </button>
            &nbsp; &nbsp; &nbsp;
            <button class="btn" type="button" onclick="toBack()">
                <i class="icon-arrow-left bigger-110"></i>
                返回
            </button>
        </div>
    </div>

</form>

</body>
</html>
<script th:inline="javascript">
    var urlPrefix="/graindepot-base";
    //var urlPrefix = "";
    var g_id = [[${id}]];
    var g_item = [[${item}]];
    $(function () {
        //初始化form验证
        initForm();
        //初始化下拉框
        comm_initProvince();
        comm_initTaxnature();
        comm_initCompanynature();
        comm_initCompanytype();
    });

    function toBack() {
        parent.$.bootstrapBox.dialog.close();
    }

    function initForm() {
        $('#validation-form').bootstrapValidator({
            fields: {
                groupname: {
                    validators: {
                        remote: {
                            url: urlPrefix + '/graindepot/checkRepeat',
                            message: '企业已存在',//提示消息
                            //delay :  2000,//每输入一个字符，就发ajax请求，服务器压力还是太大，设置2秒发送一次ajax（默认输入一个字符，提交一次，服务器压力太大）
                            type: 'POST',//请求方式
                            data: function (validator) {
                                return {
                                    graindepotname: $("#graindepotname").val(),
                                    graindepotid: g_id
                                };
                            }
                        }
                    }
                }
            }
        }).on('success.form.bv', function (e) {
            // 组织表单提交改为ajax提交
            e.preventDefault();
            var param = turnArrayToJson($('form').serializeArray());
            if (g_id) {
                param.graindepotid = g_id
            }
            $.post(urlPrefix + "/graindepot/edit", param, function (result) {
                parent.toSave(result)
            })
        });
    }


</script>